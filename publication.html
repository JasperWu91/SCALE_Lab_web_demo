<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Publication · EECS Lab</title>
  <meta name="color-scheme" content="light dark" />
  <link rel="stylesheet" href="assets/style.css" />

<style>
  .publication-section {
    margin-bottom: 48px;
  }

  .section-header {
    font-size: 1.4rem;
    font-weight: 700;
    margin-bottom: 16px;
    color: var(--fg);
    border-bottom: 2px solid var(--primary);
    padding-bottom: 8px;
  }

  /* Simple list with divider line */
  .pub-list {
    list-style-type: none;   /* 不要前面的黑點 */
    padding-left: 0;
    margin: 0;
    color: var(--fg);
    font-size: 0.95rem;
    line-height: 1.65;
  }

  .pub-list li {
    padding: 12px 0;
    border-bottom: 1px solid var(--border);
  }

  .pub-list li:last-child {
    border-bottom: none;
  }

  .pub-list li em {
    font-style: italic;
    color: var(--fg);
  }
</style>

</head>

<body data-page="publication">
<header>
  <div class="container nav">
    <div class="brand">
      <img src="assets/images/logo.svg" alt="EECS Lab Logo" class="logo">
      <a href="index.html" aria-label="Go to home">SCALE Lab</a>
    </div>

    <nav>
      <button class="hamburger" aria-label="Open navigation menu" id="menuBtn">☰</button>
      <ul id="menu">
        <li><a data-page="research" href="research.html">Research</a></li>
        <li><a data-page="advisor" href="advisor.html">Advisor</a></li>
        <li><a data-page="publication" href="publication.html">Publication</a></li>
        <li><a data-page="people" href="people.html">People</a></li>
        <li><a data-page="contact" href="contact.html">Contact</a></li>
      </ul>
    </nav>
  </div>
</header>

<section class="section">
  <div class="container">
    <h2>Publications</h2>
    <!-- <p class="lead">Listed by category (newest first).</p> -->

    <!-- Journal Papers -->
    <div class="publication-section">
      <h3 class="section-header">Journal Papers</h3>
      <ul id="journalList" class="pub-list">Loading journal papers...</ul>
    </div>

    <!-- Top Conference Papers -->
    <div class="publication-section">
      <h3 class="section-header">Top Conference Papers</h3>
      <ul id="topConfList" class="pub-list">Loading top conference papers...</ul>
    </div>

    <!-- Conference Papers -->
    <div class="publication-section">
      <h3 class="section-header">Conference Papers</h3>
      <ul id="confList" class="pub-list">Loading conference papers...</ul>
    </div>
  </div>
</section>

<script>
// Mobile menu toggle
const menuBtn = document.getElementById('menuBtn');
const menu = document.getElementById('menu');
menuBtn?.addEventListener('click', () => menu.classList.toggle('open'));

// Active nav highlight
const page = document.body.dataset.page;
if (page) {
  const link = document.querySelector(`nav a[data-page="${page}"]`);
  link?.classList.add('active');
}

function fixEncoding(text) {
  if (typeof text !== 'string') return text;
  return text
    .replace(/Ã¢â‚¬'/g, '-')
    .replace(/Ã¢â‚¬"/g, '—')
    .replace(/Ã‚Â·/g, '·')
    .replace(/Ã¢â‚¬Â¦/g, '…');
}

function renderPublicationList(publications, containerId) {
  const container = document.getElementById(containerId);

  if (!publications || publications.length === 0) {
    container.innerHTML = '<li class="muted">No publications yet.</li>';
    return;
  }

  const sorted = publications.slice().sort((a,b)=> (b.year||0)-(a.year||0));

  const html = sorted.map((p) => {
    let citation = `${fixEncoding(p.authors)}, “${fixEncoding(p.title)}”, <em>${fixEncoding(p.venue)}</em>`;
    if (p.volume) citation += `, ${fixEncoding(p.volume)}`;
    citation += `, ${p.year}.`;

    return `<li>${citation}</li>`;
  }).join("");

  container.innerHTML = html;
}

async function loadSiteData() {
  try {
    const res = await fetch('assets/site-data.json', {cache: 'no-store'});
    if (res.ok) return await res.json();
    throw new Error(res.status);
  } catch (err) {
    return {
      publications: { journal: [], top_conference: [], conference: [] }
    };
  }
}

document.addEventListener('DOMContentLoaded', () => {
  loadSiteData().then(data => {
    const pub = data.publications;
    renderPublicationList(pub.journal, "journalList");
    renderPublicationList(pub.top_conference, "topConfList");
    renderPublicationList(pub.conference, "confList");
  });
});

// Footer year
document.getElementById('yearNow').textContent = new Date().getFullYear();
</script>

<footer>
  <div class="container" style="padding: 20px 0; border-top: 1px solid var(--border); color: var(--muted);">
    © <span id="yearNow"></span> Sustainable Circuits and Architectures for Layered Eco-chips Lab.
  </div>
</footer>
</body>
</html>
